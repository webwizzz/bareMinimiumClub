{%- comment -%}
Product banners section
Left and right images are set via the customizer (image_picker).
Center item is a product selected in the customizer; its featured image,
title and description are shown. Clicking the center image or "See More"
links to the product page (PDP).
{%- endcomment -%}

<section class="product-banners section" aria-label="Product banners">
  <div class="product-banners__inner">
    <div class="product-banners__col product-banners__col--left">
      {% if section.settings.left_image != blank %}
        <img src="{{ section.settings.left_image | img_url: '800x' }}" alt="{{ section.settings.left_image_alt | escape }}" class="product-banners__img" />
      {% else %}
        <div class="product-banners__placeholder"></div>
      {% endif %}
    </div>

    <div class="product-banners__col product-banners__col--center">
      {% assign product_obj = all_products[section.settings.center_product] %}
      {% if product_obj %}
        <a href="{{ product_obj.url }}" class="product-banners__center-link">
          {% if product_obj.featured_image %}
            <img src="{{ product_obj.featured_image | img_url: '900x' }}" alt="{{ product_obj.title | escape }}" class="product-banners__img product-banners__img--center" />
          {% else %}
            <div class="product-banners__placeholder"></div>
          {% endif %}
        </a>
      {% else %}
        <div class="product-banners__placeholder"></div>
      {% endif %}
    </div>

    <div class="product-banners__col product-banners__col--right">
      {% if section.settings.right_image != blank %}
        <img src="{{ section.settings.right_image | img_url: '800x' }}" alt="{{ section.settings.right_image_alt | escape }}" class="product-banners__img" />
      {% else %}
        <div class="product-banners__placeholder"></div>
      {% endif %}
    </div>
  </div>

  <div class="product-banners__meta">
    {% if product_obj %}
      <div class="product-banners__meta-left">
        <h3 class="product-banners__title">{{ product_obj.title }}</h3>
        <p class="product-banners__description">{{ product_obj.description | strip_html  }}</p>
      </div>
      <div class="product-banners__meta-right">
        <a class="product-banners__see-more" href="{{ product_obj.url }}">See More &gt;</a>
      </div>
    {% endif %}
  </div>
</section>

<style>
  .product-banners__inner{
    display:flex;
    gap:1px !important;
    align-items:flex-start;
    max-width: var(--content-width, 1200px);
    margin-inline: auto;
    padding: 0px !important;
  }

  .product-banners__col{ flex: 1 1 33.333%; display:flex; align-items:flex-start; justify-content:center }
  .product-banners__col--center{ flex-basis: 33.333%; }

  /* Make all three images the same size and remove rounded corners */
  .product-banners__img{
    width:460px;
    height:360px;
    display:block;
    object-fit:cover;
    object-position: top center;
    border-radius: 0;
  }
  .product-banners__img--center{ height:360px; object-position: top center }

  .product-banners__placeholder{
    width:100%;
    height:360px;
    background:#f4f4f4;
    border-radius:0;
  }

  .product-banners__meta{ max-width: var(--content-width, 1200px); margin: 12px auto 40px; display:flex; justify-content:space-between; gap:20px; padding: 0 30px !important; align-items:flex-start }
  .product-banners__meta-left{ flex: 1 1 70%; }
  .product-banners__meta-right{ flex: 0 0 140px; text-align:right }
  .product-banners__title{ margin:8px 0 12px; font-size:24px; letter-spacing:0.4px; font-weight:600; text-transform:uppercase }
  .product-banners__description{ margin:0; color:#000; font-size:16px; line-height:1.5 }
  .product-banners__see-more{ color: #00000050;; text-decoration:none; font-weight:400; font-size:12px }
    .product-banners__see-more:hover{ text-decoration:underline; underline-offset:2px }

  @media (max-width: 900px){
    .product-banners__inner{ flex-direction:row; gap:0px }
    .product-banners__col--center{ order:1; flex-basis:40% }
    .product-banners__col--left{ order:0 }
    .product-banners__col--right{ order:2 }
    .product-banners__meta{ flex-direction:column; gap:8px }
    .product-banners__title{ font-size:13px }
    .product-banners__img,
    .product-banners__placeholder { height: 260px; }
    .product-banners__description{ font-size:14px }
    .product-banners__meta-right{ max-height: max-content;}
  }

  @media (max-width: 520px){
    .product-banners__col{ flex-basis:auto }
    .product-banners__meta{ padding: 0 12px }
    .product-banners__img,
    .product-banners__placeholder { height: 220px; width: 200px}
    .product-banners__see-more{ font-size:14px }
  }
</style>

{% schema %}
{
  "name": "Product banners",
  "settings": [
    {
      "type": "image_picker",
      "id": "left_image",
      "label": "Left image"
    },
    {
      "type": "text",
      "id": "left_image_alt",
      "label": "Left image alt text",
    },
    {
      "type": "product",
      "id": "center_product",
      "label": "Center product"
    },
    {
      "type": "image_picker",
      "id": "right_image",
      "label": "Right image"
    },
    {
      "type": "text",
      "id": "right_image_alt",
      "label": "Right image alt text",
    }
  ],
  "blocks": [],
  "presets": [
    { "name": "Product banners", "category": "Image" }
  ]
}
{% endschema %}
