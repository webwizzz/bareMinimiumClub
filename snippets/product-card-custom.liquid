{% liquid
  # Use selected product from block settings
  if block.settings.featured_product != blank
    assign product = block.settings.featured_product
  else
    assign product = null
  endif
-%}

<div class="product-card-wrapper" {{ block.shopify_attributes }}>
  {% if product != blank %}
    <a href="{{ product.url }}" class="product-card-link">
      <div class="product-card-image">
        {% if product.featured_media %}
          {{ product.featured_media | image_url: width: 350, height: 450 | image_tag: alt: product.title, loading: 'lazy' }}
        {% else %}
          <div class="product-card-placeholder">
            {% render 'icon-product' %}
          </div>
        {% endif %}
      </div>
      <div class="product-card-details">
        <h3 class="product-card-title">{{ product.title }}</h3>
        <p class="product-card-price">
          {% if product.price_varies %}
            {{ product.price_min | money }}+
          {% else %}
            {{ product.price | money }}
          {% endif %}
        </p>
      </div>
    </a>
  {% else %}
    <div class="product-card-placeholder-full">
      <div class="product-card-image">
        <div class="product-card-placeholder">
          {% render 'icon-product' %}
        </div>
      </div>
      <div class="product-card-details">
        <h3 class="product-card-title">{{ block.settings.placeholder_title | default: 'Product Title' }}</h3>
        <p class="product-card-price">{{ block.settings.placeholder_price | default: '4999/-' }}</p>
      </div>
    </div>
  {% endif %}
</div>

<style>
.product-card-wrapper {
  width: 100%;
  height: 100%;
}

.product-card-link {
  display: block;
  text-decoration: none;
  color: inherit;
  width: 100%;
  height: 100%;
}

.product-card-image {
  position: relative;
  width: 100%;
  aspect-ratio: 319/337;
  overflow: hidden;
  background-color: #f5f5f5;
}

.product-card-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.product-card-placeholder {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  background-color: #f5f5f5;
}

.product-card-placeholder svg {
  width: 50px;
  height: 50px;
  opacity: 0.5;
}

.product-card-details {
  padding: 8px 0;
}

.product-card-title {
  font-size: 15.5px;
  font-weight: 600;
  text-transform: uppercase;
  margin: 0 0 4px 0;
  line-height: 1.2;
}

.product-card-price {
  font-size: 15.5px;
  margin: 0;
  font-weight: 500;
}

@media (max-width: 768px) {
  .product-card-wrapper {
    width: 175px;
    height: auto;
  }
  
  .product-card-image {
    width: 175px;
    height: 223px;
    aspect-ratio: 175/223;
  }
  
  .product-card-title {
    font-size: 12px;
  }
  
  .product-card-price {
    font-size: 12px;
  }
}
</style>